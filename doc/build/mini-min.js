/*!build time : 2014-03-30 8:24:19 AM*/
KISSY.add("kg/wake-up-app/2.0.0/mini",["event","ua","uri","node"],function(a,b){function c(b){var d=c.defaultConfig;this.config=a.merge(d,b)}var d=b("event"),e=b("ua"),f=b("uri"),g=b("node"),h=g.all,i=d.Target,j="";return a.mix(c,{defaultConfig:{url:location.href,replace:!1,app:j}}),a.augment(c,i,{render:function(a){var b=this,c=b.app;if(c&&c.isIn)return!1;a?b.url=a:a=b.url;var d=new f(a),g=d.getScheme();if("http"===g||"https"===g){var h=c.defaultWebView;d=new f(h),d.setQuery("weburl="+a)}if(e.chrome&&e.android>4.4){var i=c.package;d.setFragment("Intent;scheme="+d.getScheme()+";"+i+";end"),d.setScheme("intent")}e.chrome&&e.android?setTimeout(function(){_location(d.toString())},100):b._callInIframe(d.toString())},download:function(a,b){var c=this,d=c.app;if(d&&d.isIn)return!1;a||(a=d.downloadPath());var g=new f(a);return e.android&&a.test(/\.apk$/)&&g.setFragment(""),c._location(g.toString(),b.replace||c.replace),!0},_callInIframe:function(b){var c=h('<iframe id="wake-up-iframe-'+a.guid()+'" frameborder="0" style="display:none;border:0;width:0;height:0;" src="'+b+'" />');c.appendTo("body")},_location:function(a,b){{var c=this,d=b||c.replace;c.app}d===!0?location.replace(a):location.href=a}}),c});