/*!build time : 2014-03-30 8:24:19 AM*/
KISSY.add("gallery/wake-up-app/1.0.0/app/taobao",["ua","event","uri"],function(a,b){function c(a){return a.replace(/^ip/,"iP").replace(/^a/,"A")}function d(b){a.mix(this,d.defaultConfig,b),this._init()}var e=b("ua"),f=b("event"),g=f.Target,h=b("uri");return d.defaultConfig={inAppReg:/@taobao_(iphone|android|ipad|apad)_([\d\.]+)/,windvineReg:/WindVane[\/\s]([\d\.\_]+)/,"package":"com.taobao.taobao",defaultWebView:"taobaowebview://m.taobao.com/",point:!0},a.augment(d,g,{_init:function(){var a=this,b=window.navigator.userAgent,c=!1,e=a.inAppReg,f=a._ttid();return(matched=b.match(e))?(c=!0,a._setDevice(matched)):f&&(matched=f.match(e))&&(c=!0,a._setDevice(matched)),a.package=d.package,a.isIn=c},_setDevice:function(b){if(!a.isArray(b))return!1;var d=this;return d.device=c(b[1]),d.version=b[2],!0},_ttid:function(){var a=new h(location.href);return a.getQuery("ttid")},_setPoint:function(){new h(location.href)},downloadPath:function(){var a;return e.android?a="http://download.taobaocdn.com/wireless/taobao4android/latest/taobao4android_703248.apk":e.iphone?a="http://itunes.apple.com/cn/app/id387682726?mt=8":e.ipad&&(a="https://itunes.apple.com/app/id438865278"),a}}),d});